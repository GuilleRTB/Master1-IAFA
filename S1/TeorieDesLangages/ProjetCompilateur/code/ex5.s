SETI  R0,#0
SETI  R1,#1

@width r2
@heigh r3
INVOKE 1, 2, 3

@ i
SETI R4,#0
@ j
SETI R5,#0

L1:
GOTO_GE NEXTLINE, R4, R2
INVOKE 3, 4, 5


@get center cell to r6
INVOKE 5, 6, 0
GOTO_EQ LSET0, R6, R1

@get neightborhood
INVOKE 5, 6, 1
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 2
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 3
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 4
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 5
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 6
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 7
GOTO_EQ LSET1, R6, R1
INVOKE 5, 6, 8
GOTO_EQ LSET1, R6, R1

GOTO NEXTPIX

LSET0:
INVOKE 4, 0, 0
GOTO NEXTPIX

LSET1:
INVOKE 4, 1, 0
GOTO NEXTPIX


NEXTPIX:
ADD R4, R4, R1
GOTO  L1

NEXTLINE:
SET R4,R0
ADD R5,R5,R1
GOTO_GE L3, R5, R3
GOTO L1

L3:

	STOP